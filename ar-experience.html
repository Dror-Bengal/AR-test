<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AR Campaign Experience</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            width: 100%; height: 100%;
            overflow: hidden;
            background: #000;
            font-family: 'Segoe UI', -apple-system, sans-serif;
        }

        /* Camera feed */
        #camera {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: cover;
            z-index: 1;
            transform: scaleX(-1); /* mirror for selfie feel */
        }

        /* Dark overlay for intro */
        #intro-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            padding: 30px;
            transition: opacity 0.8s;
        }
        #intro-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }
        #intro-overlay h1 {
            font-size: 26px;
            margin-bottom: 12px;
        }
        #intro-overlay p {
            color: #aaa;
            font-size: 15px;
            margin-bottom: 25px;
            max-width: 300px;
            line-height: 1.5;
        }
        .start-btn {
            padding: 14px 40px;
            background: linear-gradient(135deg, #00d4ff, #7b2ff7);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            font-family: inherit;
        }

        /* === AR Content Layer === */
        #ar-layer {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 10;
            pointer-events: none;
            perspective: 800px;
        }

        /* Candidate container */
        .candidate-container {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%) translateY(100%) scale(0.8);
            opacity: 0;
            transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
        }
        .candidate-container.visible {
            transform: translateX(-50%) translateY(0) scale(1);
            opacity: 1;
        }

        /* Candidate figure */
        .candidate-figure {
            position: relative;
            width: 200px;
            margin: 0 auto;
        }

        /* Simple illustrated candidate */
        .figure-body {
            position: relative;
            width: 160px;
            height: 280px;
            margin: 0 auto;
        }

        .figure-head {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f5cba7, #e8b796);
            margin: 0 auto 0;
            position: relative;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            z-index: 2;
        }
        .figure-hair {
            position: absolute;
            top: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 72px;
            height: 30px;
            background: #2c3e50;
            border-radius: 40px 40px 0 0;
        }
        .figure-eyes {
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            width: 35px;
            display: flex;
            justify-content: space-between;
        }
        .figure-eye {
            width: 8px;
            height: 8px;
            background: #333;
            border-radius: 50%;
            position: relative;
        }
        .figure-eye::after {
            content: '';
            position: absolute;
            top: 1px;
            left: 2px;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
        }
        .figure-smile {
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: translateX(-50%);
            width: 18px;
            height: 8px;
            border-bottom: 3px solid #c0392b;
            border-radius: 0 0 15px 15px;
        }

        /* Torso with suit */
        .figure-torso {
            width: 100px;
            height: 120px;
            background: linear-gradient(180deg, #2c3e50, #1a252f);
            border-radius: 12px 12px 0 0;
            margin: -5px auto 0;
            position: relative;
            z-index: 1;
        }
        /* Shirt/tie */
        .figure-torso::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid white;
        }
        .figure-tie {
            position: absolute;
            top: 14px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 50px;
            background: #c0392b;
            clip-path: polygon(50% 0%, 100% 8%, 70% 100%, 50% 90%, 30% 100%, 0% 8%);
        }

        /* Arms */
        .figure-arm {
            position: absolute;
            width: 30px;
            height: 90px;
            background: #2c3e50;
            border-radius: 15px;
            top: 82px;
            z-index: 0;
        }
        .figure-arm.left {
            left: 8px;
            transform: rotate(12deg);
            transform-origin: top center;
            animation: waveLeft 2s ease-in-out infinite;
        }
        .figure-arm.right {
            right: 8px;
            transform: rotate(-12deg);
            transform-origin: top center;
            animation: waveRight 3s ease-in-out 0.5s infinite;
        }
        /* Hand */
        .figure-hand {
            width: 22px;
            height: 22px;
            background: #f5cba7;
            border-radius: 50%;
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
        }

        @keyframes waveLeft {
            0%, 100% { transform: rotate(12deg); }
            50% { transform: rotate(5deg); }
        }
        @keyframes waveRight {
            0%, 100% { transform: rotate(-12deg); }
            30% { transform: rotate(-40deg); }
            60% { transform: rotate(-12deg); }
        }

        /* Floating idle animation */
        .candidate-container.visible .figure-body {
            animation: floatIdle 3s ease-in-out infinite;
        }
        @keyframes floatIdle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* Speech bubble */
        .speech-bubble {
            position: relative;
            background: white;
            color: #333;
            padding: 14px 18px;
            border-radius: 16px;
            font-size: 15px;
            font-weight: 500;
            line-height: 1.5;
            max-width: 260px;
            margin: 0 auto 15px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.25);
            opacity: 0;
            transform: scale(0.5) translateY(20px);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            transition-delay: 1s;
            direction: rtl;
        }
        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 12px solid white;
        }
        .candidate-container.visible .speech-bubble {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        /* Name badge */
        .name-badge {
            background: linear-gradient(135deg, #cc0000, #a00000);
            color: white;
            padding: 6px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            display: inline-block;
            margin-top: 8px;
            box-shadow: 0 4px 15px rgba(200,0,0,0.3);
        }

        /* Glow effect behind candidate */
        .glow-ring {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 160px;
            height: 30px;
            background: radial-gradient(ellipse, rgba(0,212,255,0.4), transparent 70%);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 1s;
            transition-delay: 0.5s;
        }
        .candidate-container.visible .glow-ring {
            opacity: 1;
            animation: pulsateGlow 2s ease-in-out infinite;
        }
        @keyframes pulsateGlow {
            0%, 100% { transform: translateX(-50%) scaleX(1); opacity: 0.6; }
            50% { transform: translateX(-50%) scaleX(1.2); opacity: 0.3; }
        }

        /* Sparkle particles */
        .sparkles {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 5;
            opacity: 0;
            transition: opacity 1s;
            transition-delay: 0.8s;
        }
        .candidate-container.visible .sparkles { opacity: 1; }

        .sparkle {
            position: absolute;
            border-radius: 50%;
        }

        /* CTA at bottom */
        .cta-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px 20px 25px;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            z-index: 20;
            display: flex;
            justify-content: center;
            gap: 10px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
            transition-delay: 2s;
            pointer-events: none;
        }
        .cta-bar.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        .cta-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            font-family: inherit;
        }
        .cta-primary {
            background: linear-gradient(135deg, #00d4ff, #7b2ff7);
            color: white;
        }
        .cta-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        /* Top badge */
        .top-badge {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            color: white;
            padding: 6px 16px;
            border-radius: 15px;
            font-size: 12px;
            z-index: 20;
            opacity: 0;
            transition: opacity 0.5s;
        }
        .top-badge.visible { opacity: 1; }

        /* Loading state */
        .loading-camera {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            z-index: 50;
            text-align: center;
        }
        .loading-camera .spinner {
            width: 40px; height: 40px;
            border: 3px solid rgba(255,255,255,0.2);
            border-top-color: #00d4ff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 10px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Error state */
        .error-msg {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            z-index: 200;
            max-width: 300px;
            display: none;
        }
    </style>
</head>
<body>

    <!-- Camera feed -->
    <video id="camera" autoplay playsinline muted></video>

    <!-- Intro overlay -->
    <div id="intro-overlay">
        <h1>ğŸ—³ï¸ ×—×•×•×™×™×ª AR</h1>
        <p>×œ×—×¦×• ×¢×œ ×”×›×¤×ª×•×¨ ×›×“×™ ×œ×”×¤×¢×™×œ ××ª ×”××¦×œ××” ×•×œ×¨××•×ª ××ª ×”××•×¢××“ ××•×¤×™×¢ ×œ×¤× ×™×›×</p>
        <button class="start-btn" onclick="startExperience()">ğŸ“± ×”×¤×¢×œ×ª ×”××¦×œ××”</button>
    </div>

    <!-- Loading state -->
    <div class="loading-camera" id="loading" style="display:none;">
        <div class="spinner"></div>
        <div style="font-size:14px;">××¤×¢×™×œ ××¦×œ××”...</div>
    </div>

    <!-- Top badge -->
    <div class="top-badge" id="topBadge">âœ¨ AR Campaign Experience</div>

    <!-- AR Content Layer -->
    <div id="ar-layer">
        <div class="candidate-container" id="candidateContainer">

            <!-- Speech bubble -->
            <div class="speech-bubble" id="speechBubble">
                ×©×œ×•×! ×× ×™ ×©××— ×œ×¤×’×•×© ××ª×›×.<br>×‘×™×—×“ × ×‘× ×” ×¢×ª×™×“ ×˜×•×‘ ×™×•×ª×¨! ğŸ‡®ğŸ‡±
            </div>

            <!-- Candidate figure -->
            <div class="figure-body">
                <!-- Head -->
                <div class="figure-head">
                    <div class="figure-hair"></div>
                    <div class="figure-eyes">
                        <div class="figure-eye"></div>
                        <div class="figure-eye"></div>
                    </div>
                    <div class="figure-smile"></div>
                </div>

                <!-- Body -->
                <div class="figure-torso">
                    <div class="figure-tie"></div>
                </div>

                <!-- Arms -->
                <div class="figure-arm left">
                    <div class="figure-hand"></div>
                </div>
                <div class="figure-arm right">
                    <div class="figure-hand"></div>
                </div>
            </div>

            <!-- Name -->
            <div class="name-badge">×™×©×¨××œ ×™×©×¨××œ×™</div>

            <!-- Glow effect -->
            <div class="glow-ring"></div>

            <!-- Sparkle particles -->
            <div class="sparkles" id="sparkles"></div>
        </div>
    </div>

    <!-- CTA buttons -->
    <div class="cta-bar" id="ctaBar">
        <button class="cta-btn cta-primary" onclick="alert('×›××Ÿ ×ª×•×›×œ×• ×œ×§×©×¨ ×œ××ª×¨ ×”×§××¤×™×™×Ÿ')">ğŸ—³ï¸ ×œ××™×“×¢ × ×•×¡×£</button>
        <button class="cta-btn cta-secondary" onclick="shareExperience()">ğŸ“¤ ×©×™×ª×•×£</button>
    </div>

    <!-- Error message -->
    <div class="error-msg" id="errorMsg">
        <p style="font-size:18px; margin-bottom:10px;">ğŸ“·</p>
        <p>×œ× ×”×¦×œ×—× ×• ×œ×’×©×ª ×œ××¦×œ××”.</p>
        <p style="font-size:13px; color:#aaa; margin-top:8px;">×× × ××©×¨×• ×’×™×©×” ×œ××¦×œ××” ×‘×“×¤×“×¤×Ÿ ×•× ×¡×• ×©×•×‘.</p>
        <button onclick="location.reload()" style="margin-top:15px; padding:10px 25px; background:#00d4ff; color:#000; border:none; border-radius:20px; font-size:14px; cursor:pointer;">× ×¡×• ×©×•×‘</button>
    </div>

    <script>
        // Generate sparkle particles
        function createSparkles() {
            const container = document.getElementById('sparkles');
            const colors = ['#00d4ff', '#7b2ff7', '#ffd93d', '#ff6b6b', '#2ecc71'];
            for (let i = 0; i < 15; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                const size = 4 + Math.random() * 8;
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const delay = Math.random() * 3;
                const dur = 2 + Math.random() * 3;
                sparkle.style.cssText = `
                    width: ${size}px; height: ${size}px;
                    background: ${color};
                    left: ${x}%; top: ${y}%;
                    animation: sparkleFloat ${dur}s ease-in-out ${delay}s infinite;
                    opacity: 0.6;
                `;
                container.appendChild(sparkle);
            }

            // Add sparkle animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes sparkleFloat {
                    0%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
                    25% { transform: translateY(-15px) scale(1.3); opacity: 0.3; }
                    50% { transform: translateY(-25px) scale(0.8); opacity: 0.7; }
                    75% { transform: translateY(-10px) scale(1.1); opacity: 0.4; }
                }
            `;
            document.head.appendChild(style);
        }
        createSparkles();

        // Speech bubble text rotation
        const speeches = [
            '×©×œ×•×! ×× ×™ ×©××— ×œ×¤×’×•×© ××ª×›×.\n×‘×™×—×“ × ×‘× ×” ×¢×ª×™×“ ×˜×•×‘ ×™×•×ª×¨! ğŸ‡®ğŸ‡±',
            '×”×—×™× ×•×š ×”×•× ×”×¢×ª×™×“ ×©×œ× ×•.\n× ×©×§×™×¢ ×‘×™×œ×“×™× ×©×œ× ×•! ğŸ“š',
            '×›×œ×›×œ×” ×—×–×§×” = ×—×‘×¨×” ×—×–×§×”.\n×”×’×™×¢ ×”×–××Ÿ ×œ×©×™× ×•×™! ğŸ’ª',
            '×ª×•×“×” ×©×”×§×“×©×ª× ×¨×’×¢.\n×›×œ ×§×•×œ ×—×©×•×‘! ğŸ—³ï¸'
        ];
        let speechIndex = 0;

        function rotateSpeech() {
            const bubble = document.getElementById('speechBubble');
            bubble.style.opacity = '0';
            bubble.style.transform = 'scale(0.8)';
            setTimeout(() => {
                speechIndex = (speechIndex + 1) % speeches.length;
                bubble.innerHTML = speeches[speechIndex].replace('\n', '<br>');
                bubble.style.opacity = '1';
                bubble.style.transform = 'scale(1)';
            }, 400);
        }

        async function startExperience() {
            const intro = document.getElementById('intro-overlay');
            const loading = document.getElementById('loading');
            const video = document.getElementById('camera');

            intro.classList.add('hidden');
            loading.style.display = '';

            try {
                // Request camera - prefer back camera for "real world" feel
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: { ideal: 'environment' },
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    },
                    audio: false
                });

                video.srcObject = stream;
                await video.play();

                // If using back camera, don't mirror
                const track = stream.getVideoTracks()[0];
                const settings = track.getSettings();
                if (settings.facingMode === 'environment') {
                    video.style.transform = 'scaleX(1)';
                }

                loading.style.display = 'none';

                // Show AR content with delay
                setTimeout(() => {
                    document.getElementById('topBadge').classList.add('visible');
                }, 300);

                setTimeout(() => {
                    document.getElementById('candidateContainer').classList.add('visible');
                }, 800);

                setTimeout(() => {
                    document.getElementById('ctaBar').classList.add('visible');
                }, 2000);

                // Rotate speech every 5 seconds
                setInterval(rotateSpeech, 5000);

            } catch (err) {
                loading.style.display = 'none';
                document.getElementById('errorMsg').style.display = '';
                console.error('Camera error:', err);
            }
        }

        function shareExperience() {
            if (navigator.share) {
                navigator.share({
                    title: '×—×•×•×™×™×ª AR - ×™×©×¨××œ ×™×©×¨××œ×™',
                    text: '×‘×•××• ×œ×¨××•×ª ××ª ×”××•×¢××“ ×‘×ª×œ×ª-×××“!',
                    url: window.location.href
                });
            } else {
                // Fallback: copy link
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('×”×§×™×©×•×¨ ×”×•×¢×ª×§! ×©×ª×¤×• ××•×ª×• ×¢× ×—×‘×¨×™×');
                });
            }
        }
    </script>
</body>
</html>
